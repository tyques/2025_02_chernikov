package ru.shift.client;

import ru.shift.common.Message;

import java.util.List;

/**
 * Интерфейс, определяющий контракт взаимодействия бизнес-логики клиента (Model)
 * с пользовательским интерфейсом (View).
 * <p>
 * Реализация этого интерфейса отвечает за реакцию на события, поступающие от сервера,
 * и отображение их пользователю (новые сообщения, изменение списка участников, статус подключения).
 */
public interface ClientUI {

    /**
     * Вызывается при успешной авторизации на сервере.
     * <p>
     * Метод должен инициировать переход от окна логина к основному окну чата
     * или разблокировать интерфейс для отправки сообщений.
     */
    void onLoginSuccess();

    /**
     * Вызывается при неудачной попытке входа (например, если никнейм уже занят).
     *
     * @param error Текстовое описание причины ошибки, полученное от сервера.
     */
    void onLoginError(String error);

    /**
     * Вызывается при разрыве соединения с сервером.
     * <p>
     * Интерфейс должен уведомить пользователя о потере связи и
     * о процессе автоматического переподключения.
     */
    void onConnectionLost();

    /**
     * Добавляет входящее сообщение в область просмотра чата.
     * <p>
     * Этот метод вызывается для:
     * <ul>
     *     <li>Сообщений других пользователей ({@code CHAT_MESSAGE})</li>
     *     <li>Системных уведомлений ({@code SYSTEM_MESSAGE})</li>
     *     <li>Загрузки истории сообщений ({@code HISTORY_RESPONSE})</li>
     * </ul>
     *
     * @param message Объект сообщения, содержащий отправителя, текст и временную метку.
     */
    void addMessage(Message message);

    /**
     * Обновляет список активных пользователей в интерфейсе.
     * <p>
     * Вызывается, когда сервер присылает обновленный список (при входе или выходе участников).
     * Текущий список в UI должен быть полностью заменен переданным.
     *
     * @param users Список имен пользователей, находящихся онлайн в данный момент.
     */
    void updateUserList(List<String> users);
}